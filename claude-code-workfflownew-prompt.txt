  # CLAUDE.md - ContractNest Multi-Repo Setup

  ## REPO STRUCTURE
  ```
  contractnest-combined/          â† Parent repo
  â”œâ”€â”€ contractnest-api/           â† Submodule (main)
  â”œâ”€â”€ contractnest-ui/            â† Submodule (main)
  â”œâ”€â”€ contractnest-edge/          â† Submodule (main)
  â”œâ”€â”€ ClaudeDocumentation/        â† Submodule (master)
  â”œâ”€â”€ ContractNest-Mobile/        â† Submodule (main)
  â”œâ”€â”€ FamilyKnows/                â† Submodule (main)
  â””â”€â”€ FK-New/                     â† Submodule (main)
  ```

  ---

  ## CRITICAL RULES FOR CLAUDE

  ### Rule 1: ONLY Provide Files Changed in THIS Iteration
  âŒ WRONG: Give all 6 files when only 4 are new  
  âœ… RIGHT: Give only the 4 new/modified files

  ### Rule 2: NO Merge Workflow
  - Do NOT provide git merge commands
  - Do NOT provide branch checkout commands
  - User handles merging via their own scripts

  ### Rule 3: Track What's Already Delivered
  - Remember which files were given in previous iterations
  - Only include NEW or RE-MODIFIED files in MANUAL_COPY_FILES/

  ### Rule 4: Clear Iteration Labeling
  - Always state: "Iteration X of Y" if known
  - Always state: "Files NEW this iteration: X"
  - Always state: "Previously delivered (not included): Y"

  ---

  ## REQUIRED OUTPUT FORMAT

  After making changes, provide this EXACT format:

  ```
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“¦ ITERATION SUMMARY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Iteration: [X of Y] or [X]
  Files NEW This Time: [count]
  Previously Delivered (NOT included): [list or "None"]

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“ FILES IN MANUAL_COPY_FILES/
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  [List ONLY files being delivered THIS iteration]

  1. [filename] â†’ [purpose]
  2. [filename] â†’ [purpose]

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ’» COPY COMMANDS (Run from contractnest-combined/)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # [Submodule Name] Changes
  Copy-Item "MANUAL_COPY_FILES\[path]\[file]" -Destination "[submodule]\[path]\[file]" -Force

  # Verify
  Write-Host "âœ… Files copied!" -ForegroundColor Green

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ§ª TEST THIS ITERATION
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - [ ] [Feature/fix from THIS iteration only]
  - [ ] [Feature/fix from THIS iteration only]

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“Œ NEXT STEPS (Your Choice)
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  After testing passes:
    Option A: Continue to next iteration
    Option B: Run .\scripts\push-main.ps1 to commit all

  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ```

  ---

  ## EXAMPLE: Multi-Iteration Task

  ### User Request: "Build 10 files for feature X"

  **Iteration 1 Response:**
  ```
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“¦ ITERATION SUMMARY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Iteration: 1 of ~3
  Files NEW This Time: 3
  Previously Delivered (NOT included): None

  ğŸ“ FILES IN MANUAL_COPY_FILES/
  1. UserService.ts â†’ New service for user management
  2. UserController.ts â†’ API endpoints
  3. user.types.ts â†’ TypeScript interfaces
  ```

  **Iteration 2 Response:**
  ```
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“¦ ITERATION SUMMARY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Iteration: 2 of ~3
  Files NEW This Time: 4
  Previously Delivered (NOT included): 
    - UserService.ts
    - UserController.ts  
    - user.types.ts

  ğŸ“ FILES IN MANUAL_COPY_FILES/
  1. UserList.tsx â†’ UI component for listing users
  2. UserDetail.tsx â†’ UI component for user details
  3. useUsers.ts â†’ React hook
  4. user.api.ts â†’ API client functions
  ```

  **Iteration 3 Response (with a fix to previous file):**
  ```
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“¦ ITERATION SUMMARY
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Iteration: 3 of 3 (FINAL)
  Files NEW This Time: 2
  Files RE-MODIFIED (included again): 1
    - UserService.ts (bug fix)
  Previously Delivered (NOT included):
    - UserController.ts
    - user.types.ts
    - UserList.tsx
    - UserDetail.tsx
    - useUsers.ts
    - user.api.ts

  ğŸ“ FILES IN MANUAL_COPY_FILES/
  1. UserService.ts â†’ BUG FIX: Fixed null check
  2. UserTests.spec.ts â†’ Unit tests
  3. UserE2E.spec.ts â†’ E2E tests
  ```

  ---

  ## FOLDER STRUCTURE FOR MANUAL_COPY_FILES

  ```
  MANUAL_COPY_FILES/
  â”œâ”€â”€ COPY_INSTRUCTIONS.txt       â† Always include this
  â”œâ”€â”€ contractnest-api/           â† Mirror submodule structure
  â”‚   â””â”€â”€ src/
  â”‚       â””â”€â”€ services/
  â”‚           â””â”€â”€ UserService.ts
  â”œâ”€â”€ contractnest-ui/
  â”‚   â””â”€â”€ src/
  â”‚       â””â”€â”€ components/
  â”‚           â””â”€â”€ UserList.tsx
  â”œâ”€â”€ contractnest-edge/
  â”‚   â””â”€â”€ supabase/
  â”‚       â””â”€â”€ functions/
  â”‚           â””â”€â”€ my-function/
  â”‚               â””â”€â”€ index.ts
  â”œâ”€â”€ FamilyKnows/
  â”‚   â””â”€â”€ src/
  â”‚       â””â”€â”€ ...
  â””â”€â”€ FK-New/
      â””â”€â”€ src/
          â””â”€â”€ ...
  ```

  ---

  ## COPY_INSTRUCTIONS.txt FORMAT

  ```
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ITERATION: [X]
  DATE: [YYYY-MM-DD]
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  FILES THIS ITERATION:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  1. contractnest-api/src/services/UserService.ts
  2. contractnest-ui/src/components/UserList.tsx

  COPY COMMANDS:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Copy-Item "MANUAL_COPY_FILES\contractnest-api\src\services\UserService.ts" -Destination "contractnest-api\src\services\UserService.ts" -Force
  Copy-Item "MANUAL_COPY_FILES\contractnest-ui\src\components\UserList.tsx" -Destination "contractnest-ui\src\components\UserList.tsx" -Force

  TEST:
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - [ ] User list displays correctly
  - [ ] User service returns data
  ```

  ---

  ## WHAT NOT TO INCLUDE

  âŒ Do NOT provide:
  - `git checkout` commands
  - `git merge` commands  
  - `git push` commands
  - Branch switching instructions
  - Full merge workflows
  - Files from previous iterations (unless re-modified)

  âœ… DO provide:
  - MANUAL_COPY_FILES/ with new files only
  - Copy-Item commands
  - Testing checklist for THIS iteration
  - Clear iteration tracking

  ---

  ## COMMIT SCRIPTS AVAILABLE

  User has these scripts in `contractnest-combined/scripts/`:

  | Script | Purpose |
  |--------|---------|
  | `push-main.ps1` | Push all submodules to main/master |
  | `push-feature.ps1` | Push while staying on feature branch |
  | `pull-safe.ps1` | Pull all repos safely |
  | `merge-feature.ps1` | Merge feature branch to master |

  **Claude does NOT need to explain these** - user knows how to use them.

  ---

  ## QUICK REFERENCE

  When user says... | Claude should...
  ------------------|------------------
  "Continue" / "Next" | Provide ONLY new files for next iteration
  "Give me all files" | Provide ALL files (cumulative) - ONLY if explicitly asked
  "Start fresh" | Reset iteration count, provide all files
  "Fix [file]" | Provide ONLY the fixed file(s)
  "Test passed, continue" | Provide ONLY new files for next iteration