<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContractNest - Block Creation Wizard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --brand: #0F172A;
            --brand-light: #1E293B;
            --seller: #7C3AED;
            --seller-light: #8B5CF6;
            --seller-bg: #F5F3FF;
            --seller-border: #DDD6FE;
            --success: #10B981;
            --success-bg: #ECFDF5;
            --warning: #F59E0B;
            --warning-bg: #FFFBEB;
            --danger: #EF4444;
            --danger-bg: #FEF2F2;
            --info: #0284C7;
            --info-bg: #F0F9FF;
            --bg: #F8FAFC;
            --surface: #FFFFFF;
            --border: #E2E8F0;
            --border-light: #F1F5F9;
            --text: #334155;
            --text-light: #64748B;
            --text-muted: #94A3B8;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
            --radius: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        /* ===== WIZARD CONTAINER ===== */
        .wizard-container {
            background: var(--surface);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            width: 100%;
            max-width: 900px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* ===== WIZARD HEADER ===== */
        .wizard-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .wizard-header h1 {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--brand);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .wizard-close {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: var(--bg);
            color: var(--text-light);
            font-size: 1.25rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wizard-close:hover {
            background: var(--danger-bg);
            color: var(--danger);
        }

        /* ===== PROGRESS BAR ===== */
        .wizard-progress {
            padding: 1rem 1.5rem;
            background: var(--bg);
            border-bottom: 1px solid var(--border);
        }

        .progress-steps {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .step-number {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--border);
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 700;
            transition: all 0.3s;
        }

        .progress-step.active .step-number {
            background: var(--seller);
            color: white;
        }

        .progress-step.completed .step-number {
            background: var(--success);
            color: white;
        }

        .progress-step.completed .step-number::after {
            content: '‚úì';
        }

        .step-label {
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--text-muted);
            display: none;
        }

        .progress-step.active .step-label {
            color: var(--seller);
            display: block;
        }

        .step-connector {
            width: 40px;
            height: 2px;
            background: var(--border);
        }

        .progress-step.completed + .step-connector,
        .step-connector.completed {
            background: var(--success);
        }

        /* ===== WIZARD BODY ===== */
        .wizard-body {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .wizard-step {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .wizard-step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .step-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--brand);
            margin-bottom: 0.5rem;
        }

        .step-description {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
        }

        /* ===== FORM ELEMENTS ===== */
        .form-section {
            margin-bottom: 1.5rem;
        }

        .form-section-title {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.35rem;
        }

        .form-label .required {
            color: var(--danger);
        }

        .form-hint {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 0.6rem 0.75rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 0.85rem;
            color: var(--text);
            transition: all 0.2s;
            font-family: inherit;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--seller);
            box-shadow: 0 0 0 3px var(--seller-bg);
        }

        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
        }

        .input-with-addon {
            display: flex;
        }

        .input-addon {
            padding: 0.6rem 0.75rem;
            background: var(--bg);
            border: 1px solid var(--border);
            border-right: none;
            border-radius: var(--radius) 0 0 var(--radius);
            font-size: 0.85rem;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .input-addon-right {
            border-right: 1px solid var(--border);
            border-left: none;
            border-radius: 0 var(--radius) var(--radius) 0;
        }

        .input-with-addon .form-input {
            border-radius: 0 var(--radius) var(--radius) 0;
        }

        .input-with-addon .form-input.has-right-addon {
            border-radius: 0;
        }

        /* ===== BLOCK TYPE SELECTOR ===== */
        .type-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
        }

        .type-card {
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .type-card:hover {
            border-color: var(--seller-border);
            background: var(--seller-bg);
        }

        .type-card.selected {
            border-color: var(--seller);
            background: var(--seller-bg);
        }

        .type-card-icon {
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .type-card-name {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--brand);
            margin-bottom: 0.2rem;
        }

        .type-card-desc {
            font-size: 0.65rem;
            color: var(--text-light);
        }

        /* ===== LOCATION TYPE SELECTOR ===== */
        .location-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }

        .location-option {
            padding: 1rem;
            border: 2px solid var(--border);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.2s;
        }

        .location-option:hover {
            border-color: var(--seller-border);
            background: var(--seller-bg);
        }

        .location-option.selected {
            border-color: var(--seller);
            background: var(--seller-bg);
        }

        .location-option-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        .location-option-icon {
            font-size: 1.25rem;
        }

        .location-option-name {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--brand);
        }

        .location-option-desc {
            font-size: 0.7rem;
            color: var(--text-light);
            line-height: 1.4;
        }

        /* ===== CONDITIONAL FIELDS ===== */
        .conditional-fields {
            background: var(--bg);
            border-radius: var(--radius);
            padding: 1rem;
            margin-top: 1rem;
            display: none;
        }

        .conditional-fields.visible {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .conditional-fields-title {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* ===== CURRENCY SELECTOR ===== */
        .currency-selector {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .currency-option {
            padding: 0.5rem 0.875rem;
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .currency-option:hover {
            border-color: var(--seller);
        }

        .currency-option.selected {
            background: var(--seller);
            border-color: var(--seller);
            color: white;
        }

        /* ===== EVIDENCE BUILDER ===== */
        .evidence-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .evidence-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg);
            border-radius: var(--radius);
            border: 1px solid var(--border);
        }

        .evidence-item.active {
            background: var(--success-bg);
            border-color: var(--success);
        }

        .evidence-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            color: transparent;
            transition: all 0.2s;
        }

        .evidence-item.active .evidence-checkbox {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .evidence-icon {
            font-size: 1.25rem;
        }

        .evidence-info {
            flex: 1;
        }

        .evidence-name {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text);
        }

        .evidence-desc {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .evidence-config {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .evidence-config select {
            padding: 0.35rem 0.5rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 0.7rem;
            background: var(--surface);
        }

        /* ===== SLA BUILDER ===== */
        .sla-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
            color: var(--text);
        }

        .sla-row .form-input,
        .sla-row .form-select {
            width: auto;
            padding: 0.4rem 0.6rem;
            font-size: 0.8rem;
        }

        .sla-row .form-input {
            width: 70px;
        }

        /* ===== RULE BUILDER ===== */
        .rule-card {
            background: var(--bg);
            border-radius: var(--radius);
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid var(--border);
        }

        .rule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .rule-type-badge {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            background: var(--seller-bg);
            color: var(--seller);
        }

        .rule-remove {
            color: var(--text-muted);
            cursor: pointer;
            font-size: 1rem;
        }

        .rule-remove:hover {
            color: var(--danger);
        }

        .rule-content {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            font-size: 0.8rem;
        }

        .rule-keyword {
            font-weight: 700;
            color: var(--seller);
        }

        .rule-select {
            padding: 0.35rem 0.5rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 0.75rem;
            background: var(--surface);
        }

        .add-rule-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem;
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            background: transparent;
            color: var(--text-light);
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }

        .add-rule-btn:hover {
            border-color: var(--seller);
            color: var(--seller);
            background: var(--seller-bg);
        }

        /* ===== TOGGLE SWITCH ===== */
        .toggle-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.6rem 0;
            border-bottom: 1px solid var(--border-light);
        }

        .toggle-row:last-child {
            border-bottom: none;
        }

        .toggle-label {
            font-size: 0.8rem;
            color: var(--text);
        }

        .toggle-switch {
            width: 40px;
            height: 22px;
            background: var(--border);
            border-radius: 11px;
            position: relative;
            cursor: pointer;
            transition: all 0.2s;
        }

        .toggle-switch.active {
            background: var(--seller);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.2s;
            box-shadow: var(--shadow-sm);
        }

        .toggle-switch.active::after {
            left: 20px;
        }

        /* ===== INFO BOX ===== */
        .info-box {
            padding: 0.875rem;
            border-radius: var(--radius);
            font-size: 0.8rem;
            line-height: 1.5;
            display: flex;
            gap: 0.75rem;
        }

        .info-box.tip {
            background: var(--info-bg);
            color: var(--info);
        }

        .info-box.warning {
            background: var(--warning-bg);
            color: #92400E;
        }

        .info-box-icon {
            font-size: 1rem;
            flex-shrink: 0;
        }

        /* ===== PREVIEW CARD ===== */
        .preview-card {
            background: var(--bg);
            border-radius: var(--radius-lg);
            padding: 1rem;
            margin-top: 1rem;
        }

        .preview-card-title {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
        }

        .preview-block {
            background: var(--surface);
            border-radius: var(--radius);
            padding: 1rem;
            border: 1px solid var(--border);
        }

        .preview-block-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .preview-block-icon {
            width: 40px;
            height: 40px;
            background: var(--seller-bg);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .preview-block-name {
            font-weight: 700;
            font-size: 0.9rem;
            color: var(--brand);
        }

        .preview-block-type {
            font-size: 0.65rem;
            color: var(--text-muted);
        }

        .preview-block-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            font-size: 0.75rem;
            color: var(--text-light);
        }

        .preview-block-meta strong {
            color: var(--text);
        }

        /* ===== WIZARD FOOTER ===== */
        .wizard-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--surface);
        }

        .btn {
            padding: 0.6rem 1.25rem;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            border: none;
        }

        .btn-primary {
            background: var(--seller);
            color: white;
        }

        .btn-primary:hover {
            background: var(--seller-light);
        }

        .btn-outline {
            background: var(--surface);
            border: 1px solid var(--border);
            color: var(--text);
        }

        .btn-outline:hover {
            background: var(--bg);
            border-color: var(--seller);
            color: var(--seller);
        }

        .btn-text {
            background: transparent;
            color: var(--text-light);
            border: none;
        }

        .btn-text:hover {
            color: var(--seller);
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
    </style>
</head>
<body>
    <div class="wizard-container">
        <!-- HEADER -->
        <div class="wizard-header">
            <h1>‚ûï Create New Block</h1>
            <button class="wizard-close">√ó</button>
        </div>

        <!-- PROGRESS -->
        <div class="wizard-progress">
            <div class="progress-steps">
                <div class="progress-step active" data-step="1">
                    <div class="step-number">1</div>
                    <span class="step-label">Type</span>
                </div>
                <div class="step-connector"></div>
                <div class="progress-step" data-step="2">
                    <div class="step-number">2</div>
                    <span class="step-label">Basic Info</span>
                </div>
                <div class="step-connector"></div>
                <div class="progress-step" data-step="3">
                    <div class="step-number">3</div>
                    <span class="step-label">Delivery</span>
                </div>
                <div class="step-connector"></div>
                <div class="progress-step" data-step="4">
                    <div class="step-number">4</div>
                    <span class="step-label">Pricing</span>
                </div>
                <div class="step-connector"></div>
                <div class="progress-step" data-step="5">
                    <div class="step-number">5</div>
                    <span class="step-label">Evidence</span>
                </div>
                <div class="step-connector"></div>
                <div class="progress-step" data-step="6">
                    <div class="step-number">6</div>
                    <span class="step-label">Rules</span>
                </div>
            </div>
        </div>

        <!-- BODY -->
        <div class="wizard-body">
            <!-- STEP 1: Select Block Type -->
            <div class="wizard-step active" data-step="1">
                <div class="step-title">What type of block do you want to create?</div>
                <div class="step-description">Each block type has different fields and behaviors. Choose the one that best fits your needs.</div>
                
                <div class="type-grid">
                    <div class="type-card selected" onclick="selectType(this, 'service')">
                        <div class="type-card-icon">üéØ</div>
                        <div class="type-card-name">Service</div>
                        <div class="type-card-desc">Deliverable work with SLA</div>
                    </div>
                    <div class="type-card" onclick="selectType(this, 'spare')">
                        <div class="type-card-icon">üì¶</div>
                        <div class="type-card-name">Spare Part</div>
                        <div class="type-card-desc">Physical product</div>
                    </div>
                    <div class="type-card" onclick="selectType(this, 'billing')">
                        <div class="type-card-icon">üí∞</div>
                        <div class="type-card-name">Billing</div>
                        <div class="type-card-desc">Payment structure</div>
                    </div>
                    <div class="type-card" onclick="selectType(this, 'text')">
                        <div class="type-card-icon">üìÑ</div>
                        <div class="type-card-name">Text</div>
                        <div class="type-card-desc">T&C, policies</div>
                    </div>
                    <div class="type-card" onclick="selectType(this, 'video')">
                        <div class="type-card-icon">üé¨</div>
                        <div class="type-card-name">Video</div>
                        <div class="type-card-desc">Embedded media</div>
                    </div>
                    <div class="type-card" onclick="selectType(this, 'image')">
                        <div class="type-card-icon">üñºÔ∏è</div>
                        <div class="type-card-name">Image</div>
                        <div class="type-card-desc">Photos, diagrams</div>
                    </div>
                    <div class="type-card" onclick="selectType(this, 'checklist')">
                        <div class="type-card-icon">‚òëÔ∏è</div>
                        <div class="type-card-name">Checklist</div>
                        <div class="type-card-desc">Task verification</div>
                    </div>
                    <div class="type-card" onclick="selectType(this, 'document')">
                        <div class="type-card-icon">üìé</div>
                        <div class="type-card-name">Document</div>
                        <div class="type-card-desc">File attachment</div>
                    </div>
                </div>

                <div class="info-box tip" style="margin-top: 1.5rem;">
                    <span class="info-box-icon">üí°</span>
                    <div><strong>Tip:</strong> Service blocks are for work that needs to be done (yoga sessions, repairs, consultations). Spare Parts are for physical products that may be used during a service.</div>
                </div>
            </div>

            <!-- STEP 2: Basic Info (Service) -->
            <div class="wizard-step" data-step="2">
                <div class="step-title">Basic Information</div>
                <div class="step-description">Define the fundamental details of this service block.</div>

                <div class="form-section">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Block Name <span class="required">*</span></label>
                            <input type="text" class="form-input" placeholder="e.g., Yoga Session, AC Deep Service" id="blockName">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Icon</label>
                            <select class="form-select" id="blockIcon">
                                <option value="üßò">üßò Yoga/Wellness</option>
                                <option value="ü©∫">ü©∫ Medical</option>
                                <option value="‚ùÑÔ∏è">‚ùÑÔ∏è AC/Cooling</option>
                                <option value="üîß">üîß Repair/Maintenance</option>
                                <option value="üíª">üíª IT/Tech</option>
                                <option value="üéì">üéì Training</option>
                                <option value="üìû">üìû Consultation</option>
                                <option value="üßπ">üßπ Cleaning</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Description <span class="required">*</span></label>
                        <textarea class="form-textarea" placeholder="Describe what this service includes..." id="blockDesc"></textarea>
                        <div class="form-hint">This will be shown to buyers in the contract details.</div>
                    </div>

                    <div class="form-row-3">
                        <div class="form-group">
                            <label class="form-label">Duration <span class="required">*</span></label>
                            <input type="number" class="form-input" value="60" id="duration">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Duration Unit</label>
                            <select class="form-select" id="durationUnit">
                                <option value="minutes" selected>Minutes</option>
                                <option value="hours">Hours</option>
                                <option value="days">Days</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Buffer Time</label>
                            <select class="form-select" id="bufferTime">
                                <option value="0">No buffer</option>
                                <option value="15" selected>15 min</option>
                                <option value="30">30 min</option>
                                <option value="60">1 hour</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Tags</label>
                        <input type="text" class="form-input" placeholder="e.g., PCOD, wellness, women-health (comma separated)">
                        <div class="form-hint">Tags help organize and search for blocks.</div>
                    </div>
                </div>
            </div>

            <!-- STEP 3: Delivery Settings -->
            <div class="wizard-step" data-step="3">
                <div class="step-title">Delivery Settings</div>
                <div class="step-description">How and where will this service be delivered?</div>

                <div class="form-section">
                    <div class="form-section-title"><span>üìç</span> Service Location</div>
                    
                    <div class="location-options">
                        <div class="location-option selected" onclick="selectLocation(this, 'onsite')">
                            <div class="location-option-header">
                                <span class="location-option-icon">üè†</span>
                                <span class="location-option-name">On-Premise</span>
                            </div>
                            <div class="location-option-desc">Service delivered at client's location or a physical venue</div>
                        </div>
                        
                        <div class="location-option" onclick="selectLocation(this, 'virtual')">
                            <div class="location-option-header">
                                <span class="location-option-icon">üíª</span>
                                <span class="location-option-name">Virtual</span>
                            </div>
                            <div class="location-option-desc">Service delivered online via video call or remote access</div>
                        </div>
                        
                        <div class="location-option" onclick="selectLocation(this, 'hybrid')">
                            <div class="location-option-header">
                                <span class="location-option-icon">üîÑ</span>
                                <span class="location-option-name">Hybrid</span>
                            </div>
                            <div class="location-option-desc">Can be delivered either way based on client preference</div>
                        </div>
                    </div>

                    <!-- On-Premise Fields -->
                    <div class="conditional-fields visible" id="onsiteFields">
                        <div class="conditional-fields-title">üè† On-Premise Settings</div>
                        
                        <div class="form-group">
                            <label class="form-label">Default Location</label>
                            <select class="form-select">
                                <option value="client">Client's Address (from contract)</option>
                                <option value="seller">Seller's Premises</option>
                                <option value="custom">Custom Location (specify per contract)</option>
                            </select>
                        </div>

                        <div class="toggle-row">
                            <span class="toggle-label">üìç Require GPS check-in from vendor</span>
                            <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
                        </div>

                        <div class="toggle-row">
                            <span class="toggle-label">üöó Include travel time in scheduling</span>
                            <div class="toggle-switch" onclick="this.classList.toggle('active')"></div>
                        </div>
                    </div>

                    <!-- Virtual Fields -->
                    <div class="conditional-fields" id="virtualFields">
                        <div class="conditional-fields-title">üíª Virtual Settings</div>
                        
                        <div class="form-group">
                            <label class="form-label">Meeting Platform</label>
                            <select class="form-select">
                                <option value="auto">Auto-generate link (ContractNest)</option>
                                <option value="zoom">Zoom</option>
                                <option value="meet">Google Meet</option>
                                <option value="teams">Microsoft Teams</option>
                                <option value="custom">Custom link (per contract)</option>
                            </select>
                        </div>

                        <div class="toggle-row">
                            <span class="toggle-label">üìß Auto-send meeting invite to client</span>
                            <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
                        </div>

                        <div class="toggle-row">
                            <span class="toggle-label">üé• Record session for evidence</span>
                            <div class="toggle-switch" onclick="this.classList.toggle('active')"></div>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title"><span>üë§</span> Vendor Assignment</div>
                    
                    <div class="form-group">
                        <label class="form-label">Who performs this service?</label>
                        <select class="form-select" id="vendorAssignment">
                            <option value="seller">Seller performs directly</option>
                            <option value="manual">Assign vendor manually per contract</option>
                            <option value="auto">Auto-assign from vendor pool</option>
                            <option value="client">Client chooses from available vendors</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Required Skills (optional)</label>
                        <input type="text" class="form-input" placeholder="e.g., Certified Yoga Instructor, PCOD Specialist">
                        <div class="form-hint">Used for auto-assignment and vendor filtering.</div>
                    </div>
                </div>
            </div>

            <!-- STEP 4: Pricing -->
            <div class="wizard-step" data-step="4">
                <div class="step-title">Pricing</div>
                <div class="step-description">Set the base price and tax settings for this block.</div>

                <div class="form-section">
                    <div class="form-section-title"><span>üí±</span> Currency</div>
                    
                    <div class="currency-selector">
                        <div class="currency-option selected" onclick="selectCurrency(this, 'INR')">
                            <span>üáÆüá≥</span> INR
                        </div>
                        <div class="currency-option" onclick="selectCurrency(this, 'USD')">
                            <span>üá∫üá∏</span> USD
                        </div>
                        <div class="currency-option" onclick="selectCurrency(this, 'EUR')">
                            <span>üá™üá∫</span> EUR
                        </div>
                        <div class="currency-option" onclick="selectCurrency(this, 'GBP')">
                            <span>üá¨üáß</span> GBP
                        </div>
                        <div class="currency-option" onclick="selectCurrency(this, 'AED')">
                            <span>üá¶üá™</span> AED
                        </div>
                        <div class="currency-option" onclick="selectCurrency(this, 'SGD')">
                            <span>üá∏üá¨</span> SGD
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title"><span>üí∞</span> Base Price</div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Price <span class="required">*</span></label>
                            <div class="input-with-addon">
                                <span class="input-addon" id="currencySymbol">‚Çπ</span>
                                <input type="number" class="form-input" value="2000" id="basePrice">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Price Type</label>
                            <select class="form-select" id="priceType">
                                <option value="session">Per Session</option>
                                <option value="hour">Per Hour</option>
                                <option value="day">Per Day</option>
                                <option value="fixed">Fixed Price</option>
                                <option value="unit">Per Unit</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Minimum Quantity</label>
                            <input type="number" class="form-input" value="1" id="minQty">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Maximum Quantity</label>
                            <input type="number" class="form-input" placeholder="No limit" id="maxQty">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title"><span>üßæ</span> Tax Settings</div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Tax Rate</label>
                            <select class="form-select" id="taxRate">
                                <option value="0">No Tax (0%)</option>
                                <option value="5">GST 5%</option>
                                <option value="12">GST 12%</option>
                                <option value="18" selected>GST 18%</option>
                                <option value="28">GST 28%</option>
                                <option value="custom">Custom Rate</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Price Display</label>
                            <select class="form-select" id="taxDisplay">
                                <option value="exclusive">Tax Exclusive (add tax on top)</option>
                                <option value="inclusive">Tax Inclusive (tax included)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">HSN/SAC Code</label>
                        <input type="text" class="form-input" placeholder="e.g., 999799 for health services" id="hsnCode">
                        <div class="form-hint">Required for GST invoicing in India.</div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title"><span>üè∑Ô∏è</span> Discounts</div>
                    
                    <div class="toggle-row">
                        <span class="toggle-label">Allow discounts on this block</span>
                        <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
                    </div>
                    
                    <div class="form-row" style="margin-top: 0.75rem;">
                        <div class="form-group">
                            <label class="form-label">Maximum Discount</label>
                            <div class="input-with-addon">
                                <input type="number" class="form-input has-right-addon" value="20">
                                <span class="input-addon input-addon-right">%</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Discount Approval</label>
                            <select class="form-select">
                                <option value="auto">Auto-apply within limit</option>
                                <option value="approval">Requires seller approval</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Live Preview -->
                <div class="preview-card">
                    <div class="preview-card-title">üìã Live Preview</div>
                    <div class="preview-block">
                        <div class="preview-block-header">
                            <div class="preview-block-icon">üßò</div>
                            <div>
                                <div class="preview-block-name" id="previewName">Yoga Session</div>
                                <div class="preview-block-type">Service Block</div>
                            </div>
                        </div>
                        <div class="preview-block-meta">
                            <span>üí∞ <strong id="previewPrice">‚Çπ2,000</strong>/session</span>
                            <span>‚è±Ô∏è <strong>60</strong> min</span>
                            <span>üßæ <strong>+18%</strong> GST</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- STEP 5: Evidence Requirements -->
            <div class="wizard-step" data-step="5">
                <div class="step-title">Evidence Requirements</div>
                <div class="step-description">What proof should vendors provide when completing this service?</div>

                <div class="info-box tip" style="margin-bottom: 1.5rem;">
                    <span class="info-box-icon">üí°</span>
                    <div>Evidence is visible to buyers and provides trust that services were delivered as promised.</div>
                </div>

                <div class="evidence-list">
                    <div class="evidence-item active" onclick="toggleEvidence(this)">
                        <div class="evidence-checkbox">‚úì</div>
                        <span class="evidence-icon">üì∑</span>
                        <div class="evidence-info">
                            <div class="evidence-name">Photo Upload</div>
                            <div class="evidence-desc">Before/during/after photos</div>
                        </div>
                        <div class="evidence-config">
                            <select>
                                <option>Min 1 photo</option>
                                <option selected>Min 2 photos</option>
                                <option>Min 3 photos</option>
                            </select>
                            <select>
                                <option selected>Required</option>
                                <option>Optional</option>
                            </select>
                        </div>
                    </div>

                    <div class="evidence-item" onclick="toggleEvidence(this)">
                        <div class="evidence-checkbox">‚úì</div>
                        <span class="evidence-icon">üìç</span>
                        <div class="evidence-info">
                            <div class="evidence-name">GPS Location</div>
                            <div class="evidence-desc">Verify vendor was on-site</div>
                        </div>
                        <div class="evidence-config">
                            <select>
                                <option selected>Check-in only</option>
                                <option>Check-in + Check-out</option>
                            </select>
                            <select>
                                <option selected>Required</option>
                                <option>Optional</option>
                            </select>
                        </div>
                    </div>

                    <div class="evidence-item active" onclick="toggleEvidence(this)">
                        <div class="evidence-checkbox">‚úì</div>
                        <span class="evidence-icon">‚úçÔ∏è</span>
                        <div class="evidence-info">
                            <div class="evidence-name">Client Signature</div>
                            <div class="evidence-desc">Digital sign-off from client</div>
                        </div>
                        <div class="evidence-config">
                            <select>
                                <option selected>Required</option>
                                <option>Optional</option>
                            </select>
                        </div>
                    </div>

                    <div class="evidence-item active" onclick="toggleEvidence(this)">
                        <div class="evidence-checkbox">‚úì</div>
                        <span class="evidence-icon">üìù</span>
                        <div class="evidence-info">
                            <div class="evidence-name">Session Notes</div>
                            <div class="evidence-desc">Written summary of the session</div>
                        </div>
                        <div class="evidence-config">
                            <select>
                                <option>Required</option>
                                <option selected>Optional</option>
                            </select>
                        </div>
                    </div>

                    <div class="evidence-item" onclick="toggleEvidence(this)">
                        <div class="evidence-checkbox">‚úì</div>
                        <span class="evidence-icon">üìÑ</span>
                        <div class="evidence-info">
                            <div class="evidence-name">Document Upload</div>
                            <div class="evidence-desc">Reports, certificates, invoices</div>
                        </div>
                        <div class="evidence-config">
                            <select>
                                <option selected>PDF only</option>
                                <option>PDF, DOC</option>
                                <option>Any file</option>
                            </select>
                            <select>
                                <option>Required</option>
                                <option selected>Optional</option>
                            </select>
                        </div>
                    </div>

                    <div class="evidence-item" onclick="toggleEvidence(this)">
                        <div class="evidence-checkbox">‚úì</div>
                        <span class="evidence-icon">üé•</span>
                        <div class="evidence-info">
                            <div class="evidence-name">Video Recording</div>
                            <div class="evidence-desc">Record session (virtual only)</div>
                        </div>
                        <div class="evidence-config">
                            <select>
                                <option>Required</option>
                                <option selected>Optional</option>
                            </select>
                        </div>
                    </div>

                    <div class="evidence-item" onclick="toggleEvidence(this)">
                        <div class="evidence-checkbox">‚úì</div>
                        <span class="evidence-icon">‚≠ê</span>
                        <div class="evidence-info">
                            <div class="evidence-name">Client Rating</div>
                            <div class="evidence-desc">Ask client to rate the service</div>
                        </div>
                        <div class="evidence-config">
                            <select>
                                <option selected>Required</option>
                                <option>Optional</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-section" style="margin-top: 1.5rem;">
                    <div class="form-section-title"><span>üìã</span> Custom Evidence Field</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Field Name</label>
                            <input type="text" class="form-input" placeholder="e.g., Meter Reading, Serial Number">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Field Type</label>
                            <select class="form-select">
                                <option>Text</option>
                                <option>Number</option>
                                <option>Date</option>
                                <option>Dropdown</option>
                            </select>
                        </div>
                    </div>
                    <button class="add-rule-btn" style="margin-top: 0.5rem;">
                        <span>‚ûï</span> Add Custom Field
                    </button>
                </div>
            </div>

            <!-- STEP 6: SLA & Rules -->
            <div class="wizard-step" data-step="6">
                <div class="step-title">SLA & Automation Rules</div>
                <div class="step-description">Define completion deadlines and automated actions.</div>

                <div class="form-section">
                    <div class="form-section-title"><span>‚è∞</span> Service Level Agreement</div>
                    
                    <div class="form-group">
                        <label class="form-label">Completion Window</label>
                        <div class="sla-row">
                            <span>Task must be completed within</span>
                            <input type="number" class="form-input" value="48">
                            <select class="form-select">
                                <option selected>hours</option>
                                <option>days</option>
                            </select>
                            <span>of scheduled time</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Reschedule Policy</label>
                        <div class="sla-row">
                            <span>Allow reschedule up to</span>
                            <input type="number" class="form-input" value="24">
                            <select class="form-select">
                                <option selected>hours</option>
                                <option>days</option>
                            </select>
                            <span>before scheduled time</span>
                        </div>
                    </div>

                    <div class="toggle-row" style="margin-top: 0.75rem;">
                        <span class="toggle-label">‚ö†Ô∏è Mark as SLA Breach if not completed on time</span>
                        <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title"><span>ü§ñ</span> Automation Rules</div>
                    
                    <!-- Rule 1: Reminder -->
                    <div class="rule-card">
                        <div class="rule-header">
                            <span class="rule-type-badge">üîî Reminder</span>
                            <span class="rule-remove">√ó</span>
                        </div>
                        <div class="rule-content">
                            <span class="rule-keyword">IF</span>
                            <span>task not started</span>
                            <select class="rule-select">
                                <option>2 hours</option>
                                <option>4 hours</option>
                                <option selected>24 hours</option>
                                <option>48 hours</option>
                            </select>
                            <span>before deadline</span>
                        </div>
                        <div class="rule-content" style="margin-top: 0.5rem;">
                            <span class="rule-keyword">THEN</span>
                            <select class="rule-select">
                                <option selected>Send WhatsApp to vendor</option>
                                <option>Send email to vendor</option>
                                <option>Send SMS to vendor</option>
                            </select>
                        </div>
                    </div>

                    <!-- Rule 2: Escalation -->
                    <div class="rule-card">
                        <div class="rule-header">
                            <span class="rule-type-badge">‚ö†Ô∏è Escalation</span>
                            <span class="rule-remove">√ó</span>
                        </div>
                        <div class="rule-content">
                            <span class="rule-keyword">IF</span>
                            <span>task</span>
                            <select class="rule-select">
                                <option>not started</option>
                                <option selected>breaches SLA</option>
                                <option>gets rejected</option>
                            </select>
                        </div>
                        <div class="rule-content" style="margin-top: 0.5rem;">
                            <span class="rule-keyword">THEN</span>
                            <select class="rule-select">
                                <option selected>Alert seller via WhatsApp</option>
                                <option>Alert seller via email</option>
                                <option>Create support ticket</option>
                                <option>Auto-reassign to another vendor</option>
                            </select>
                        </div>
                    </div>

                    <!-- Rule 3: Notification -->
                    <div class="rule-card">
                        <div class="rule-header">
                            <span class="rule-type-badge">üìß Notification</span>
                            <span class="rule-remove">√ó</span>
                        </div>
                        <div class="rule-content">
                            <span class="rule-keyword">IF</span>
                            <span>task</span>
                            <select class="rule-select">
                                <option selected>is completed</option>
                                <option>is started</option>
                                <option>is rescheduled</option>
                            </select>
                        </div>
                        <div class="rule-content" style="margin-top: 0.5rem;">
                            <span class="rule-keyword">THEN</span>
                            <select class="rule-select">
                                <option selected>Notify client via WhatsApp</option>
                                <option>Notify client via email</option>
                                <option>Notify seller</option>
                                <option>Notify all parties</option>
                            </select>
                        </div>
                    </div>

                    <button class="add-rule-btn">
                        <span>‚ûï</span> Add Another Rule
                    </button>
                </div>

                <div class="form-section">
                    <div class="form-section-title"><span>üéÅ</span> Buyer Experience</div>
                    
                    <div class="toggle-row">
                        <span class="toggle-label">üìÖ Allow buyer to request specific date/time</span>
                        <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
                    </div>
                    <div class="toggle-row">
                        <span class="toggle-label">üîÑ Allow buyer to reschedule</span>
                        <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
                    </div>
                    <div class="toggle-row">
                        <span class="toggle-label">‚ùå Allow buyer to cancel (with policy)</span>
                        <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
                    </div>
                    <div class="toggle-row">
                        <span class="toggle-label">üì∏ Show evidence to buyer after completion</span>
                        <div class="toggle-switch active" onclick="this.classList.toggle('active')"></div>
                    </div>
                </div>

                <div class="info-box warning">
                    <span class="info-box-icon">‚ö°</span>
                    <div><strong>Almost done!</strong> Review your settings and click "Create Block" to save. You can always edit this block later.</div>
                </div>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="wizard-footer">
            <button class="btn btn-text" id="backBtn" style="visibility: hidden;" onclick="prevStep()">
                ‚Üê Back
            </button>
            <div style="display: flex; gap: 0.75rem;">
                <button class="btn btn-outline" onclick="saveDraft()">Save as Draft</button>
                <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">
                    Continue ‚Üí
                </button>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;
        let selectedType = 'service';
        let selectedLocation = 'onsite';
        let selectedCurrency = 'INR';

        const currencySymbols = {
            'INR': '‚Çπ',
            'USD': '$',
            'EUR': '‚Ç¨',
            'GBP': '¬£',
            'AED': 'ÿØ.ÿ•',
            'SGD': 'S$'
        };

        function selectType(element, type) {
            document.querySelectorAll('.type-card').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');
            selectedType = type;
        }

        function selectLocation(element, location) {
            document.querySelectorAll('.location-option').forEach(o => o.classList.remove('selected'));
            element.classList.add('selected');
            selectedLocation = location;

            // Show/hide conditional fields
            document.getElementById('onsiteFields').classList.remove('visible');
            document.getElementById('virtualFields').classList.remove('visible');

            if (location === 'onsite' || location === 'hybrid') {
                document.getElementById('onsiteFields').classList.add('visible');
            }
            if (location === 'virtual' || location === 'hybrid') {
                document.getElementById('virtualFields').classList.add('visible');
            }
        }

        function selectCurrency(element, currency) {
            document.querySelectorAll('.currency-option').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');
            selectedCurrency = currency;
            document.getElementById('currencySymbol').textContent = currencySymbols[currency];
            updatePreview();
        }

        function toggleEvidence(element) {
            element.classList.toggle('active');
        }

        function updatePreview() {
            const name = document.getElementById('blockName')?.value || 'Yoga Session';
            const price = document.getElementById('basePrice')?.value || '2000';
            const symbol = currencySymbols[selectedCurrency];
            
            document.getElementById('previewName').textContent = name;
            document.getElementById('previewPrice').textContent = `${symbol}${parseInt(price).toLocaleString()}`;
        }

        function updateProgressBar() {
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                const stepNum = index + 1;
                step.classList.remove('active', 'completed');
                
                if (stepNum < currentStep) {
                    step.classList.add('completed');
                } else if (stepNum === currentStep) {
                    step.classList.add('active');
                }
            });

            document.querySelectorAll('.step-connector').forEach((connector, index) => {
                if (index + 1 < currentStep) {
                    connector.classList.add('completed');
                } else {
                    connector.classList.remove('completed');
                }
            });
        }

        function showStep(step) {
            document.querySelectorAll('.wizard-step').forEach(s => s.classList.remove('active'));
            document.querySelector(`.wizard-step[data-step="${step}"]`).classList.add('active');

            // Update buttons
            document.getElementById('backBtn').style.visibility = step > 1 ? 'visible' : 'hidden';
            document.getElementById('nextBtn').textContent = step === totalSteps ? '‚úì Create Block' : 'Continue ‚Üí';

            updateProgressBar();
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            } else {
                // Create block
                alert('Block created successfully! üéâ');
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function saveDraft() {
            alert('Draft saved! You can continue editing later.');
        }

        // Initialize
        showStep(1);
        
        // Update preview on input changes
        document.getElementById('blockName')?.addEventListener('input', updatePreview);
        document.getElementById('basePrice')?.addEventListener('input', updatePreview);
    </script>
</body>
</html>
